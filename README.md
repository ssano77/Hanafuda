# 花札こいこいゲーム

これは、PythonとPygameで作成された花札の「こいこい」をプレイするゲームです。CPUと対戦することができます。

## ゲームの概要

「こいこい」は、花札を使って役を作り、点数を競うゲームです。プレイヤーは手札から1枚、山札から1枚のカードを場に出し、同じ月のカードが場にあれば、それらのカードを獲得できます。獲得したカードで役が完成すると、勝負を続けるか（こいこい）、やめるかを選択できます。

## 改善された機能

- **完全な「こいこい」選択システム** - 役が完成したときに「こいこい」か「勝負」かを選択可能
- **改善されたUI** - ゲーム状態、スコア、役の表示が向上
- **賢いCPU AI** - より戦略的なカード選択
- **エラーハンドリング** - より安定したゲーム実行
- **視覚的改善** - カード表示とレイアウトの改善
- **ゲーム進行管理** - ラウンド終了とゲーム終了の適切な処理

## 遊び方

1. 自分の番が来たら、手札からカードを1枚クリックして選択します。
2. 選択したカードが場に出され、同じ月のカードがあれば自動的に獲得します。
3. 次に、山札から自動で1枚カードが引かれ、同様に場に同じ月のカードがあれば獲得します。
4. 獲得したカードで役が完成すると、「こいこい」か「勝負」かの選択画面が表示されます。
   - **こいこい**: ゲームを続行してより高い役を狙う（リスクあり）
   - **勝負**: 現在の役で勝負を決める（安全）
5. CPUのターンも自動で進行します。
6. 12ラウンド（月）を通じてゲームを行い、最終的な点数で勝敗を決めます。

## 操作方法

- **マウス**: カードの選択、ボタンのクリック
- **ESCキー**: ゲーム終了

## 実行方法

1. 仮想環境をアクティブにします：
   ```bash
   .venv\Scripts\Activate.ps1  # Windows PowerShell
   ```

2. 必要なライブラリがインストールされていることを確認します：
   ```bash
   pip install pygame
   ```

3. メインのPythonスクリプトを実行します：
   ```bash
   python koikoi/main.py
   ```

## 必要なライブラリ

- `pygame`: ゲームのグラフィック描画とイベント処理（バージョン 2.6.1以降推奨）

## 役（やく）について

ゲームには以下のような役があります：

- **光札系**: 五光（15点）、四光（10点）、雨四光（8点）、三光（6点）
- **種札系**: 猪鹿蝶（5点）、種札（5枚以上で1+枚数-5点）
- **短冊系**: 赤短（5点）、青短（5点）、短冊札（5枚以上で1+枚数-5点）
- **特殊役**: 花見で一杯（5点）、月見で一杯（5点）
- **カス札**: 10枚以上で1+枚数-10点
